<div class="p-4 relative">
  <div class="mx-auto w-fit">
    <h2>
      <span *ngIf="!userId">Nieuwe gebruiker</span>
      <span *ngIf="userId">Gebruiker bewerken</span>
    </h2>
    <form [formGroup]="userForm" (submit)="onSubmit()">
      <div class="mb-6">
        <label
          for="username"
          [class]="
            userForm.controls['username'].invalid &&
            userForm.controls['username'].touched
            ? 'error' : ''
          "
        >
          Gebruikersnaam
        </label>
        <input
          type="text"
          id="username"
          [class]="
            userForm.controls['username'].invalid &&
            userForm.controls['username'].touched
            ? 'error' : ''
          "
          formControlName="username"
          required>
        <p
          *ngIf="
            userForm.controls['username'].invalid &&
            userForm.controls['username'].touched
          "
          class="mt-2 text-sm text-red-600 dark:text-red-500">
          Gebruikersnaam is verplicht!
        </p>
      </div>
      <div class="grid md:grid-cols-2 md:gap-6">
        <div class="mb-6">
          <label
            for="firstname"
            [class]="
              userForm.controls['firstname'].invalid &&
              userForm.controls['firstname'].touched
              ? 'error' : ''
            "
          >
            Voornaam
          </label>
          <input
            type="text"
            id="firstname"
            [class]="
              userForm.controls['firstname'].invalid &&
              userForm.controls['firstname'].touched
              ? 'error' : ''
            "
            formControlName="firstname"
            required>
          <p
            *ngIf="
              userForm.controls['firstname'].invalid &&
              userForm.controls['firstname'].touched
            "
            class="mt-2 text-sm text-red-600 dark:text-red-500">
            Voornaam is verplicht!
          </p>
        </div>
        <div class="mb-6">
          <label
            for="lastname"
            [class]="
              userForm.controls['lastname'].invalid &&
              userForm.controls['lastname'].touched
              ? 'error' : ''
            "
          >
            Achternaam
          </label>
          <input
            type="text"
            id="lastname"
            [class]="
              userForm.controls['lastname'].invalid &&
              userForm.controls['lastname'].touched
              ? 'error' : ''
            "
            formControlName="lastname"
            required>
          <p
            *ngIf="
              userForm.controls['lastname'].invalid &&
              userForm.controls['lastname'].touched
            "
            class="mt-2 text-sm text-red-600 dark:text-red-500">
            Achternaam is verplicht!
          </p>
        </div>
      </div>
        <div class="mb-6">
          <label
            for="email"
            [class]="
              userForm.controls['email'].invalid &&
              userForm.controls['email'].touched
              ? 'error' : ''
            "
          >
            Email
          </label>
          <input
            type="email"
            id="email"
            [class]="
              userForm.controls['email'].invalid &&
              userForm.controls['email'].touched
              ? 'error' : ''
            "
            formControlName="email"
            required>
          <p
            *ngIf="
              userForm.controls['email'].invalid &&
              userForm.controls['email'].touched
            "
            class="mt-2 text-sm text-red-600 dark:text-red-500">
            Email is verplicht!
          </p>
        </div>
      <div class="mb-6">
        <label
          for="role"
          [class]="
            userForm.controls['role'].invalid &&
            userForm.controls['role'].touched
            ? 'error' : ''
          "
        >
          Rol
        </label>
        <select
          id="role"
          [class]="
            userForm.controls['role'].invalid &&
            userForm.controls['role'].touched
            ? 'error' : ''
          "
          formControlName="role"
          required>
          <option *ngFor="let role of roles | keyvalue" [value]="role.value">{{ role.value | titlecase }}</option>
        </select>
        <p
          *ngIf="
          userForm.controls['role'].invalid &&
          userForm.controls['role'].touched
          "
          class="mt-2 text-sm text-red-600 dark:text-red-500">
          Een rol is verplicht!
        </p>
      </div>
      <div *ngIf="!userId">
        <div class="mb-6">
          <label
            for="password"
            [class]="
              userForm.controls['password'].invalid &&
              userForm.controls['password'].touched
              ? 'error' : ''
            "
          >
            Wachtwoord
          </label>
          <input
            type="password"
            id="password"
            [class]="
              userForm.controls['password'].invalid &&
              userForm.controls['password'].touched
              ? 'error' : ''
            "
            formControlName="password"
            required>
          <p
            *ngIf="
              userForm.controls['password'].invalid &&
              userForm.controls['password'].touched
            "
            class="mt-2 text-sm text-red-600 dark:text-red-500">
            Wachtwoord is verplicht!
          </p>
        </div>
        <div class="mb-6">
          <label
            for="c-password"
            [class]="
              userForm.controls['passwordConfirm'].invalid &&
              userForm.controls['passwordConfirm'].touched
              ? 'error' : ''
            "
          >
            Bevestig wachtwoord
          </label>
          <input
            type="password"
            id="c-password"
            [class]="
              userForm.controls['passwordConfirm'].invalid &&
              userForm.controls['passwordConfirm'].touched
              ? 'error' : ''
            "
            formControlName="passwordConfirm"
            required>
          <p
            *ngIf="
              userForm.controls['passwordConfirm'].invalid &&
              userForm.controls['passwordConfirm'].touched
            "
            class="mt-2 text-sm text-red-600 dark:text-red-500">
            Bevestig je wachtwoord!
          </p>
        </div>
      </div>
      <div>
        <button type="button" class="bg-secondary px-4 py-2 rounded-md text-white mr-2" (click)="onCancel()">
          Annuleren
        </button>
        <button type="submit" class="bg-accent px-4 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed" [disabled]="userForm.invalid">
          Opslaan
        </button>
      </div>
    </form>
  </div>
</div>
