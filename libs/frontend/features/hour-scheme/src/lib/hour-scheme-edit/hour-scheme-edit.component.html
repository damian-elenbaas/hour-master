<div class="p-4 relative">
  <div class="mx-auto w-fit">
    <h2>
      <span *ngIf="!hourSchemeId">Nieuw urenschema</span>
      <span *ngIf="hourSchemeId">Urenschema bijwerken</span>
    </h2>
    <form [formGroup]="hsForm" (ngSubmit)="onSubmit()">
      <div class="mb-6">
        <label for="date">Datum</label>
        <input id="date" formControlName="date" type="date">
      </div>
      <table class="w-full text-sm text-left">
        <thead class="text-xs uppercase bg-primary text-white">
          <tr>
            <th scope="col" class="px-6 py-3">
              Project
            </th>
            <th scope="col" class="px-6 py-3">
              Uren
            </th>
            <th scope="col" class="px-6 py-3">
              Machine
            </th>
            <th scope="col" class="px-6 py-3">
              Omschrijving
            </th>
          </tr>
        </thead>
        <tbody formArrayName="rows">
          <tr class="border-b" *ngFor="let row of rows.controls; let i = index" [formGroupName]="i">
            <td>
              <select formControlName="project">
                <option *ngFor="let project of projects" [value]="project.id">{{project.name}}</option>
              </select>
            </td>
            <td><input formControlName="hours" type="number" step="0.1" min="0"></td>
            <td>
              <select formControlName="machine">
                <option *ngFor="let machine of machines" [value]="machine.id">{{machine.name}}</option>
              </select>
            </td>
            <td><textarea formControlName="description"></textarea></td>
          </tr>
          <tr>
            <td colspan="4" class="text-center pt-2">
              <button
                class="mx-auto"
                type="button"
                (click)="addRow()"
              >
                <i class="fas fa-plus"></i> Rij toevoegen
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="mt-5">
        <button type="button" class="bg-secondary px-4 py-2 rounded-md text-white mr-2" (click)="onCancel()">
          Annuleren
        </button>
        <button type="submit" class="bg-accent px-4 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed"
          [disabled]="hsForm.invalid">
          Opslaan
        </button>
      </div>
    </form>
  </div>
</div>
